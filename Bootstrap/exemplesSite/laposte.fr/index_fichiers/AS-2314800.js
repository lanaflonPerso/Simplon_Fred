var __as_bot=(function(){try{return/bot|crawl(er|ing)|slurp|spider|facebookexternalhit|bingpreview/i.test(navigator.userAgent||"");}catch(e){return false;}})();if((typeof __as_hk)=="undefined"&&!__as_bot){var __as_v="3-0-0";var __as_hk="AS-2314800";var __as_ra=0.25;var __as_ac_ra=1;var __as_vival=10;var __as_tu="https://app.beampulse.com";var __as_cfgbase=null;var __as_prjroot="";(function(){try{for(var i=0,s=document.getElementsByTagName("script");i<s.length;++i){var str=(s[i].src||"").split("?")[0];var search=str.match(/^(https?:\/\/[^\/]+\/)(.*\/)?AS-2314800\.js$/i);if(search&&search.length>=2){__as_cfgbase=search[1];if(search.length>=3&&(typeof search[2]!=="undefined")){__as_prjroot=search[2];}if(/https?:\/\/s3.amazonaws.com\//i.test(__as_cfgbase)&&__as_prjroot!==""){search=__as_prjroot.match(/^([^\/]+)\/(.*\/)?$/);if(search!==null&&search.length>=2){__as_cfgbase=__as_cfgbase.replace("://s3.amazonaws.com","://"+search[1]+".s3.amazonaws.com");__as_prjroot=search.length>=3&&(typeof search[2]!=="undefined")?search[2]:"";}}break;}}}catch(e){window.console.log(e);}})();var __as_progbase=window.__as_cfgbase&&(function(){var m=window.__as_cfgbase.match(/^https?:\/\/(.+)\//i);return m&&m.length===2&&m[1]||null;})()||"d3fkowfgyn239o.cloudfront.net";var __as_synch=false;var __as_ign_qparams=true;var __as_gac=true;var __as_active=true;try{var __as_seg=[{segmentId:0,group:"DEFAULT",simple:true,encName:"DTY$RBU4KQo2AzwX",sendXitiEvents:false,options:[{instanceId:0,order:0,variable:"VISITOR_TYPE",operator:"EQUALS",value:"new"}]},{segmentId:1,group:"DEFAULT",simple:true,encName:"ETY9ERE_Mw0lTDgNMiEhXyok",sendXitiEvents:false,options:[{instanceId:1,order:0,variable:"VISITOR_TYPE",operator:"EQUALS",value:"ret"}]},{segmentId:2,group:"DEFAULT",simple:true,encName:"BSEmCUMiPwIwDyZEJCYyWTYyBw",sendXitiEvents:false,options:[{instanceId:2,order:0,variable:"REFERER_TYPE",operator:"EQUALS",value:"org"}]},{segmentId:3,group:"DEFAULT",simple:true,encName:"Aj8lRBU4KQo2AzwX",sendXitiEvents:false,options:[{instanceId:3,order:0,variable:"ALL_VISITORS",operator:"EQUALS",value:"all"}],shouldRecord:true},{segmentId:4,group:"DEFAULT",simple:true,encName:"ADwkFBYlPxFiCCsSKCswQw",sendXitiEvents:false,options:[{instanceId:4,order:0,variable:"DEVICE_TYPE",operator:"EQUALS",value:"DESKTOP"}]},{segmentId:5,group:"DEFAULT",simple:true,encName:"FzIrCAYlegcnGicHJDs",sendXitiEvents:false,options:[{instanceId:5,order:0,variable:"DEVICE_TYPE",operator:"EQUALS",value:"TABLET"}]},{segmentId:6,group:"DEFAULT",simple:true,encName:"DjwrDQ80egcnGicHJDs",sendXitiEvents:false,options:[{instanceId:6,order:0,variable:"DEVICE_TYPE",operator:"EQUALS",value:"SMARTPHONE"}]},{segmentId:10,group:"SIMPLE_SEGMENT",simple:true,encName:"ADwnEgYjKQotAm5MIj0mRDc6HTkmcz0MCiJ6ECcLIwEvPHw",sendXitiEvents:false,options:[{instanceId:10,order:0,variable:"PAGE",operator:"CONTAINS",value:"confirmation"}]},{segmentId:11,group:"SIMPLE_SEGMENT",simple:true,encName:"ATw8EAogLwZiGicXKDwJRWhnMXom",sendXitiEvents:false,options:[{instanceId:11,order:0,variable:"PAGE",operator:"CONTAINS",value:"boutique.laposte.fr"}]},{segmentId:12,group:"SIMPLE_SEGMENT",simple:true,encName:"EzIuAUMhKAwmGScQYT48QzEjKDZzYwxdBg",sendXitiEvents:false,options:[{instanceId:12,order:0,variable:"ELEMENT_ON_PAGE",operator:"EQUALS",key:"form#addToCartForm > div > span",value:"PRESENT"}]},{segmentId:13,group:"SIMPLE_SEGMENT",simple:true,encName:"Djo6AUMwL0MyDSANJDo",sendXitiEvents:false,options:[{instanceId:13,order:0,variable:"ELEMENT_ON_PAGE",operator:"EQUALS",key:"div#panierPopin",value:"VISIBLE"}]},{segmentId:14,group:"SIMPLE_SEGMENT",simple:true,encName:"EzInDQYjehUrHycQHT1lAB1u",sendXitiEvents:false,options:[{instanceId:14,order:0,variable:"PAGE",operator:"CONTAINS",value:"boutique.laposte.fr/panier"}]},{segmentId:15,group:"SIMPLE_SEGMENT",simple:true,encName:"ADssBwg$LxdiUm4lNDw9VTYjHSUqMCgQCj40",sendXitiEvents:false,options:[{instanceId:15,order:0,variable:"PAGE",operator:"CONTAINS",value:"boutique.laposte.fr/authentification/in-paiement-tunnel"}]},{segmentId:16,group:"SIMPLE_SEGMENT",simple:true,encName:"ECY7Egw9ehA3Hm4IJGgmRTEhHQ",sendXitiEvents:false,options:[{instanceId:16,order:0,variable:"EVENT_ON_ELEMENT",operator:"EQUALS",key:"div#app > section~section > div > div > div > div",page:"http://www.laposte.fr/particulier",extra1:"true",value:"MOUSEOVER"}]},{segmentId:17,group:"SIMPLE_SEGMENT",simple:true,encName:"ECY7Egw9ehA3Hm4IJGgmRTEhHQ",sendXitiEvents:false,options:[{instanceId:17,order:0,variable:"EVENT_ON_ELEMENT",operator:"EQUALS",key:"div#app > section~section > div > div > div > div",page:"http://www.laposte.fr/particulier",extra1:"true",value:"MOUSEOVER"}]}];var __as_srchances=0.001;var __as_showAllData=false;var __as_id_js="null";var __as_value=[];var __as_ac=[];}catch(ex){}var __as_localStorage_available=(function(){var lst=typeof localStorage;var ls=lst!=="undefined"&&lst!=="unknown";if(!ls){return !1;}var g="__as_test_ls";try{return localStorage.setItem(g,g),localStorage.removeItem(g),!0;}catch(a){return !1;}})();window.__as_localStorage_only=false;if((typeof XtraCookie)=="undefined"){XtraCookie={readCookieByName:function(name){var deb,fin;deb=document.cookie.indexOf(name+"=");if(deb>=0){deb+=name.length+1;fin=document.cookie.indexOf(";",deb);if(fin<0){fin=document.cookie.length;}return unescape(document.cookie.substring(deb,fin));}return"0";},setCookieByName:function(name,content,sec){XtraCookie.setCookieFull(name,content,sec,"/",XtraCookie.getDomain(document.location.href));},setCookieFull:function(name,content,sec,path,domain){var expireDate=new Date();expireDate.setTime(expireDate.getTime()+sec*1000);var domainArgs="";if(domain!="localhost:8888"){domainArgs=";domain="+domain;}document.cookie=name+"="+escape(content)+";expires="+expireDate.toGMTString()+domainArgs+";path="+path;},deleteCookie:function(name){XtraCookie.setCookieByName(name,"",-1);},getDomain:function(url){var t=url.match("//([^/]+)/");if(t&&t.length>1){if(t[1].match("^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$")){return t[1];}else{var o=t[1].split(".").reverse();var d=(o.length>1)?"."+o[1]+"."+o[0]:o[0];XtraCookie.setCookieFull("__as_test","__as_test",10000,"/",d);if(XtraCookie.readCookieByName("__as_test")!="__as_test"){d=(o.length>2)?"."+o[2]+"."+o[1]+"."+o[0]:o[0];}document.cookie="__as_test=;expires=Fri, 02-Jan-1970 00:00:00 GMT;domain="+d+";path=/";return d;}}else{return"";}}};}(function(){try{var idn="__as_reset",id=-1,now=(new Date()).getTime();function ti(v){try{id=parseInt(v);if(isNaN(id)){id=-1;}}catch(e){id=-1;}}if(__as_localStorage_available){ti(localStorage.getItem(idn));}if(id<1){ti(XtraCookie.readCookieByName(idn));}if(id<1){var end=(now+31536000000).toString();if(__as_localStorage_available){localStorage.setItem(idn,end);}else{if(!__as_localStorage_only){XtraCookie.setCookieByName(idn,end,33955200);}}}else{if(now>id){var end=(now+31536000000).toString(),i;var cos=(document.cookie||"").split("; ");for(i=cos.length-1;i>=0;i--){var co=cos[i].match("__as_[^=\\s]+");if(co&&co.length==1){XtraCookie.deleteCookie(co[0]);}}if(__as_localStorage_available){for(i=localStorage.length-1;i>=0;i--){var k=localStorage.key(i);if(/^__as_/.test(k)){localStorage.removeItem(k);}}localStorage.setItem(idn,end);localStorage.setItem("__as_ledt",now.toString());}else{if(!__as_localStorage_only){XtraCookie.setCookieByName(idn,end,33955200);}}}}}catch(e){window.console.log(e);}})();window.__as_may_run_listener=function(){window.__as_may_run_listener=function(){console.log("BeamPulse should be launched only once");};var __as_rng=false;(function(){var ls=__as_localStorage_available;if(__as_localStorage_only&&!ls){return;}var rp=function(prop){var ret=ls?localStorage.getItem(prop):null;return ret!==null?ret:XtraCookie.readCookieByName(prop);};var sh=function(prop){return window.location.search.indexOf(prop)>=0;};var st=function(key,val){if(ls){localStorage.setItem(key,val);}if(!__as_localStorage_only){XtraCookie.setCookieByName(key,val,31536000);}};if(rp("__as_config")!=="0"||sh("__as_config")){__as_rng=true;__as_active=true;return;}if(rp("__as_sr_iframe")!=="0"||sh("__as_sr_iframe")){window.__as_no_stats=true;return;}if(!__as_active){return;}var ogo=rp("__as_rng");var go,rtgo;if(sh("__as_do_not_track")){rtgo=go=false;st("__as_rng","optout");}else{if(ogo==="optout"){rtgo=go=false;}else{var r=0;var str=true;var hasRtm=(typeof __as_rtmra!=="undefined")&&(__as_rtmra>__as_ra);function rand(frX,toI){return frX+((1-Math.random())*(toI-frX));}if(ogo!=="0"){if(ogo==="true"){r=rand(0,__as_ra);}else{if(ogo==="false"&&(hasRtm?__as_rtmra:__as_ra)<1){r=rand(hasRtm?__as_rtmra:__as_ra,1);}else{if(ogo==="rtm"&&hasRtm){r=rand(__as_ra,__as_rtmra);}else{try{var stlv=parseInt(ogo);if(!isNaN(stlv)&&0<stlv&&stlv<=1000){r=stlv/1000;str=false;}}catch(e){}}}}}if(r<=0){r=rand(0,1);str=true;}if(str){ogo=1000-(((1-r)*1000)|0);st("__as_rng",ogo.toString());r=ogo/1000;}go=r<=(__as_ra*__as_ac_ra);rtgo=hasRtm&&!go&&r<=(__as_rtmra*__as_ac_ra);}}__as_rng=go||rtgo;if(!go&&rtgo){window.__as_no_stats=true;}})();if(__as_rng&&__as_active&&(!(("doNotTrack" in navigator)&&(navigator.doNotTrack=="1")))&&(!(("doNotTrack" in window)&&(window.doNotTrack=="1")))){(function(){var hd=document.head||document.getElementsByTagName("head")[0];var pt=location.protocol==="https:"?"https:":"http:";var pl;var pgb=pt+"//"+__as_progbase+"/";if(pgb!==window.__as_cfgbase){pl=document.createElement("link");pl.rel="dns-prefetch";pl.href=pgb;hd.appendChild(pl);}pl=document.createElement("link");pl.rel="dns-prefetch";pl.href=__as_tu;hd.appendChild(pl);if(window.__as_cfgbase===null){pl=document.createElement("link");pl.rel="dns-prefetch";pl.href=pt+"//js-action.s3.amazonaws.com/";hd.appendChild(pl);}if(typeof window.__as_x_storage!=="undefined"){window.__as_x_storage.close();}var listener=window.listener=function(){var _="",hb='"></scr',mb="(function () {",gc=".cache.js",ab="/",tb="//",qb="//d3fkowfgyn239o.cloudfront.net/listener/",db="//js-time.s3.amazonaws.com/",ub="/listener/",Tb="048A652F86EB91C35FFEEE92544A97DF",Ub="3229366FF23891070E4468CC67F71135",Vb="338E18EA262977CB6EF111BD0FB1FFA2",Wb="626FF98FD1BE76617FD904375398D1B4",Xb="6ECF3941F8909F83245C4A7D6262FF7A",Yb="92198411B3985AC1D4F5630E99C03D4A",Zb="96B530D00716A614F3C6004DD3AF3B2E",fc=":",kc=":moduleBase",fb="<scr",$b="AC0C840DCD4ED8CCB9144AE09A619A3A",$="Aborted loading listener on browser's undefined user-agent",_b="BD37A5FA021128DCF37FE2B4026DB23A",ac="C4FC5ECD0C0B199E0A56683F0D28EA6F",bc="C61E13FEC47C80BCD2B221E7380C434D",cc="D04348AA9DB734484120150CE013BDC4",dc="D946E6C9B7EED82FD4DA5E5774AFE9E1",zb="DEBUG",X="DUMMY",Cb="ERROR",ec="FAA08820082E3443E7AA5D31B05E2DED",Db="FATAL",lb="Failed to load ",Ab="INFO",jc="Ignoring non-whitelisted Dev Mode URL: ",Eb="OFF",yb="TRACE",Bb="WARN",xb="[\\?&]log_level=([^&#]*)",ob="__gwtDevModeHook:listener",ic="_gwt_dummy_",S="begin",R="bootstrap",lc="end",hc="file:",Ob="gecko",Pb="gecko1_8",T="gwt.codesvr.listener=",U="gwt.codesvr=",Z="head",cb="http:",rb="http://",bb="https:",sb="https://",Kb="ie10",Nb="ie6",Mb="ie8",Lb="ie9",gb='ipt language="javascript" src="',ib="ipt>",kb="javascript",V="listener",Sb="listener.devmode.js",pb="listener.intr.nocache.js",vb="listener/",wb="log_level",Jb="msie",Gb="opera",Ib="safari",jb="script",Rb="selectingPermutation",W="startup",eb="time.js?ts=",Y="undefined",Qb="unknown",Fb="user.agent",Hb="webkit",nb="})();";var p=window;var q=document;s(R,S);function r(){var a=p.location.search;return a.indexOf(T)!=-1||a.indexOf(U)!=-1;}function s(a,b){if(p.__gwtStatsEvent){p.__gwtStatsEvent({moduleName:V,sessionId:p.__gwtStatsSessionId,subSystem:W,evtGroup:a,millis:(new Date).getTime(),type:b});}}listener.__sendStats=s;listener.__moduleName=V;listener.__errFn=null;listener.__moduleBase=X;listener.__softPermutationId=0;listener.__computePropValue=null;listener.__getPropMap=null;listener.__gwtInstallCode=function(){};listener.__gwtStartLoadingFragment=function(){return null;};var t=function(){return false;};var u=function(){return null;};__propertyErrorFunction=null;var v=p.__gwt_activeModules=p.__gwt_activeModules||{};v[V]={moduleName:V};var w=false;function A(){C();return window.document;}function B(){C();if(typeof window.document.body===Y||window.document.body==null){return window.document.getElementsByTagName(Z)[0];}else{return window.document.body;}}function C(){if(w){return;}window.$wnd=window;w=true;}function D(b){if(/undefined.cache.js/.test(b)){console.log($);return;}p.__as_synch=!!p.__as_synch||false;var c=true;var d=A();var e=typeof p.__as_time!==Y&&(p.__as_time&&typeof p.__as_time.time===Y);if(e){p.time=function(a){p.__as_time=a;};e=p.__as_cfgbase?p.__as_cfgbase+(/\/$/.test(p.__as_cfgbase)?_:ab)+(typeof p.__as_prjroot!==Y?p.__as_prjroot:_):(location.protocol===bb?bb:cb)+db;e+=eb;var f=((new Date).getTime()/30000|0).toString(36);e+=f;}if(p.__as_synch&&(typeof d.body==Y||d.body==null)){try{if(e){d.write(fb+gb+e+hb+ib);}d.write(fb+gb+b+hb+ib);c=false;p.__as_synch=true;}catch(a){console.log(a.message);}}if(c){p.__as_synch=false;var g=B();var h;if(e){h=d.createElement(jb);h.language=kb;h.src=e;g.appendChild(h);}h=d.createElement(jb);h.language=kb;h.src=b;if(listener.__errFn){h.onerror=function(){listener.__errFn(V,new Error(lb+b));};}g.appendChild(h);}}listener.__startLoadingFragment=function(a){return H(a);};listener.__installRunAsyncCode=function(a){eval(mb.concat(a).concat(nb));};function F(){u=function(a){return null;};__propertyErrorFunction=null;listener.__errFn=null;}function G(){var a=bb==document.location.protocol;var b=a?bb:cb;if(p.__as_localStorage_available&&(typeof sessionStorage!==Y&&sessionStorage.getItem(ob)!==null)){return sessionStorage.getItem(ob).replace(pb,_);}else{if(typeof p.__as_progbase===Y){return b+qb;}else{var c;if(/^http:\/\//.test(p.__as_progbase)){c=a?p.__as_progbase.replace(rb,sb):p.__as_progbase;}else{if(/^https:\/\//.test(p.__as_progbase)){c=p.__as_progbase;}else{if(/^\/\//.test(p.__as_progbase)){c=b+p.__as_progbase;}else{c=b+tb+p.__as_progbase;}}}if(!/\/$/.test(c)){c+=ab;}if(/\/listener\/$/.test(c)){c=c.replace(ub,ub);}else{c+=vb;}return c;}}}function H(a){if(a.match(/^\//)){return a;}if(a.match(/^[a-zA-Z]+:\/\//)){return a;}return listener.__moduleBase+a;}function I(){var g=[];var h=0;function j(a,b){var c=g;for(var d=0,e=a.length-1;d<e;++d){c=c[a[d]]||(c[a[d]]=[]);}c[a[e]]=b;}var k=[];var l=[];function m(a){var b=l[a](),c=k[a];if(b in c){return b;}var d=[];for(var e in c){d[c[e]]=e;}if(__propertyErrorFunc){__propertyErrorFunc(a,d,b);}throw null;}l[wb]=function(){var a;if(a==null){var b=new RegExp(xb);var c=b.exec(location.search);if(c!=null){a=c[1];}}if(a==null){a=u(wb);}if(!t(wb,a)){var d=[yb,zb,Ab,Bb,Cb,Db,Eb];var e=null;var f=false;for(i in d){f|=a==d[i];if(t(wb,d[i])){e=d[i];}if(i==d.length-1||f&&e!=null){a=e;break;}}}return a;};k[wb]={INFO:0,OFF:1};l[Fb]=function(){var b=navigator.userAgent.toLowerCase();var c=function(a){return parseInt(a[1])*1000+parseInt(a[2]);};if(function(){return b.indexOf(Gb)!=-1;}()){return Gb;}if(function(){return b.indexOf(Hb)!=-1;}()){return Ib;}if(function(){return b.indexOf(Jb)!=-1&&q.documentMode>=10;}()){return Kb;}if(function(){return b.indexOf(Jb)!=-1&&q.documentMode>=9;}()){return Lb;}if(function(){return b.indexOf(Jb)!=-1&&q.documentMode>=8;}()){return Mb;}if(function(){var a=/msie ([0-9]+)\.([0-9]+)/.exec(b);if(a&&a.length==3){return c(a)>=6000;}}()){return Nb;}if(function(){return b.indexOf(Ob)!=-1;}()){return Pb;}return Qb;};k[Fb]={gecko1_8:0,ie10:1,ie6:2,ie8:3,ie9:4,opera:5,safari:6};t=function(a,b){return b in k[a];};listener.__getPropMap=function(){var a={};for(var b in k){if(k.hasOwnProperty(b)){a[b]=m(b);}}return a;};listener.__computePropValue=m;p.__gwt_activeModules[V].bindings=listener.__getPropMap;s(R,Rb);if(r()){return H(Sb);}var n;try{j([Ab,Pb],Tb);j([Ab,Nb],Ub);j([Eb,Nb],Vb);j([Eb,Mb],Wb);j([Eb,Pb],Xb);j([Ab,Gb],Yb);j([Eb,Ib],Zb);j([Eb,Gb],$b);j([Ab,Ib],_b);j([Eb,Lb],ac);j([Ab,Kb],bc);j([Eb,Kb],cc);j([Ab,Mb],dc);j([Ab,Lb],ec);n=g[m(wb)][m(Fb)];var o=n.indexOf(fc);if(o!=-1){h=parseInt(n.substring(o+1),10);n=n.substring(0,o);}}catch(a){}listener.__softPermutationId=h;return H(n+gc);}function J(){}F();listener.__moduleBase=G();v[V].moduleBase=listener.__moduleBase;var K=I();if(p){var L=!!(p.location.protocol==cb||p.location.protocol==hc);p.__gwt_activeModules[V].canRedirect=L;function M(){var b=ic;try{p.sessionStorage.setItem(b,b);p.sessionStorage.removeItem(b);return true;}catch(a){return false;}}if(L&&M()){var N=ob;var O=p.sessionStorage[N];if(!/^http:\/\/(localhost|127\.0\.0\.1)(:\d+)?\/.*$/.test(O)){if(O&&(window.console&&console.log)){console.log(jc+O);}O=_;}if(O&&!p[N]){p[N]=true;p[N+kc]=G();var P=q.createElement(jb);P.src=O;var Q=q.getElementsByTagName(Z)[0];Q.insertBefore(P,Q.firstElementChild||Q.children[0]);return false;}}}J();s(R,lc);D(K);return true;};listener.succeeded=listener();})();}};(function(){if(!window.__as_localStorage_available){window.__as_may_run_listener();}else{var __as_x_storage_loc="https://as-2314800.cdn.beampulse.com/prj/AS-2314800/lsbp-1l0vd0c.html";var __as_x_storage_loc_a=document.createElement("a");__as_x_storage_loc_a.href=__as_x_storage_loc;var changed=__as_x_storage_loc_a.protocol!==window.location.protocol||__as_x_storage_loc_a.host!==window.location.host;if(!changed||typeof window.__as_x_storage!=="undefined"||(window.location.protocol==="https:"&&__as_x_storage_loc_a.protocol!=="https:")){window.__as_may_run_listener();}else{!function(){var a,b,c,d;!function(){var e={},f={};a=function(a,b,c){e[a]={deps:b,callback:c};},d=c=b=function(a){function c(b){if("."!==b.charAt(0)){return b;}for(var c=b.split("/"),d=a.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g){d.pop();}else{if("."===g){continue;}d.push(g);}}return d.join("/");}if(d._eak_seen=e,f[a]){return f[a];}if(f[a]={},!e[a]){throw new Error("Could not find module "+a);}for(var g,h=e[a],i=h.deps,j=h.callback,k=[],l=0,m=i.length;m>l;l++){"exports"===i[l]?k.push(g={}):k.push(b(c(i[l])));}var n=j.apply(this,k);return f[a]=g||n;};}(),a("promise/all",["./utils","exports"],function(a,b){function c(a){var b=this;if(!d(a)){throw new TypeError("You must pass an array to all.");}return new b(function(b,c){function d(a){return function(b){f(a,b);};}function f(a,c){h[a]=c,0===--i&&b(h);}var g,h=[],i=a.length;0===i&&b([]);for(var j=0;j<a.length;j++){g=a[j],g&&e(g.then)?g.then(d(j),c):f(j,g);}});}var d=a.isArray,e=a.isFunction;b.all=c;}),a("promise/asap",["exports"],function(a){function b(){return function(){process.nextTick(e);};}function c(){var a=0,b=new i(e),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2;};}function d(){return function(){j.setTimeout(e,1);};}function e(){for(var a=0;a<k.length;a++){var b=k[a],c=b[0],d=b[1];c(d);}k=[];}function f(a,b){var c=k.push([a,b]);1===c&&g();}var g,h="undefined"!=typeof window?window:{},i=h.MutationObserver||h.WebKitMutationObserver,j="undefined"!=typeof global?global:void 0===this?window:this,k=[];g="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?b():i?c():d(),a.asap=f;}),a("promise/config",["exports"],function(a){function b(a,b){return 2!==arguments.length?c[a]:(c[a]=b,void 0);}var c={instrument:!1};a.config=c,a.configure=b;}),a("promise/polyfill",["./promise","./utils","exports"],function(a,b,c){function d(){var a;a="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var b="Promise" in a&&"resolve" in a.Promise&&"reject" in a.Promise&&"all" in a.Promise&&"race" in a.Promise&&function(){var b;return new a.Promise(function(a){b=a;}),f(b);}();b||(a.Promise=e);}var e=a.Promise,f=b.isFunction;c.polyfill=d;}),a("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(a,b,c,d,e,f,g,h){function i(a){if(!v(a)){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}if(!(this instanceof i)){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}this._subscribers=[],j(a,this);}function j(a,b){function c(a){o(b,a);}function d(a){q(b,a);}try{a(c,d);}catch(e){d(e);}}function k(a,b,c,d){var e,f,g,h,i=v(c);if(i){try{e=c(d),g=!0;}catch(j){h=!0,f=j;}}else{e=d,g=!0;}n(b,e)||(i&&g?o(b,e):h?q(b,f):a===D?o(b,e):a===E&&q(b,e));}function l(a,b,c,d){var e=a._subscribers,f=e.length;e[f]=b,e[f+D]=c,e[f+E]=d;}function m(a,b){for(var c,d,e=a._subscribers,f=a._detail,g=0;g<e.length;g+=3){c=e[g],d=e[g+b],k(b,c,d,f);}a._subscribers=null;}function n(a,b){var c,d=null;try{if(a===b){throw new TypeError("A promises callback cannot return that same promise.");}if(u(b)&&(d=b.then,v(d))){return d.call(b,function(d){return c?!0:(c=!0,b!==d?o(a,d):p(a,d),void 0);},function(b){return c?!0:(c=!0,q(a,b),void 0);}),!0;}}catch(e){return c?!0:(q(a,e),!0);}return !1;}function o(a,b){a===b?p(a,b):n(a,b)||p(a,b);}function p(a,b){a._state===B&&(a._state=C,a._detail=b,t.async(r,a));}function q(a,b){a._state===B&&(a._state=C,a._detail=b,t.async(s,a));}function r(a){m(a,a._state=D);}function s(a){m(a,a._state=E);}var t=a.config,u=(a.configure,b.objectOrFunction),v=b.isFunction,w=(b.now,c.all),x=d.race,y=e.resolve,z=f.reject,A=g.asap;t.async=A;var B=void 0,C=0,D=1,E=2;i.prototype={constructor:i,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(a,b){var c=this,d=new this.constructor(function(){});if(this._state){var e=arguments;t.async(function(){k(c._state,d,e[c._state-1],c._detail);});}else{l(this,d,a,b);}return d;},"catch":function(a){return this.then(null,a);}},i.all=w,i.race=x,i.resolve=y,i.reject=z,h.Promise=i;}),a("promise/race",["./utils","exports"],function(a,b){function c(a){var b=this;if(!d(a)){throw new TypeError("You must pass an array to race.");}return new b(function(b,c){for(var d,e=0;e<a.length;e++){d=a[e],d&&"function"==typeof d.then?d.then(b,c):b(d);}});}var d=a.isArray;b.race=c;}),a("promise/reject",["exports"],function(a){function b(a){var b=this;return new b(function(b,c){c(a);});}a.reject=b;}),a("promise/resolve",["exports"],function(a){function b(a){if(a&&"object"==typeof a&&a.constructor===this){return a;}var b=this;return new b(function(b){b(a);});}a.resolve=b;}),a("promise/utils",["exports"],function(a){function b(a){return c(a)||"object"==typeof a&&null!==a;}function c(a){return"function"==typeof a;}function d(a){return"[object Array]"===Object.prototype.toString.call(a);}var e=Date.now||function(){return(new Date).getTime();};a.objectOrFunction=b,a.isFunction=c,a.isArray=d,a.now=e;}),b("promise/polyfill").polyfill();}();function XLSClient(a,b){b=b||{};this._id=XLSClient._generateUUID();this._promise=b.promise||Promise;this._frameId=b.frameId||"XLSClient-"+this._id;this._origin=XLSClient._getOrigin(a);this._requests={};this._closed=this._connected=!1;this._count=0;this._timeout=b.timeout||3000;this._listener=null;this._installListener();var c;b.frameId&&(c=document.getElementById(b.frameId));c&&this._poll();c=c||this._createFrame(a);this._hub=c.contentWindow;}XLSClient.frameStyle={display:"none",position:"absolute",top:"-999px",left:"-999px"};XLSClient._getOrigin=function(a){var b;b=document.createElement("a");b.href=a;b.host||(b=window.location);a=(b.protocol&&":"!==b.protocol?b.protocol:window.location.protocol)+"//"+b.host;return a.replace(/:80$|:443$/,"");};XLSClient._generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16);});};var xlsp=XLSClient.prototype;xlsp.onConnect=function(){var a=this;if(this._connected){return this._promise.resolve();}if(this._closed){return this._promise.reject(Error("XLSClient has closed"));}this._requests.connect||(this._requests.connect=[]);return new this._promise(function(b,c){var d=setTimeout(function(){c(Error("XLSClient could not connect"));},a._timeout);a._requests.connect.push(function(a){clearTimeout(d);if(a){return c(a);}b();});});};xlsp.set=function(a,b){return this._request("set",{key:a,value:b});};xlsp.get=function(a){var b=Array.prototype.slice.call(arguments);return this._request("get",{keys:b});};xlsp.del=function(){var a=Array.prototype.slice.call(arguments);return this._request("del",{keys:a});};xlsp.clear=function(){return this._request("clear");};xlsp.getKeys=function(){return this._request("getKeys");};xlsp.getVals=function(){return this._request("getVals");};xlsp.getAll=function(a){return this._request("getAll",a);};xlsp.setAll=function(a){return this._request("setAll",a);};xlsp.close=function(){var a=document.getElementById(this._frameId);a&&a.parentNode.removeChild(a);window.removeEventListener?window.removeEventListener("message",this._listener,!1):window.detachEvent("onmessage",this._listener);this._connected=!1;this._closed=!0;};xlsp._installListener=function(){var a=this;this._listener=function(b){var c,d,e;if(!a._closed&&b.origin===a._origin){if("cross-storage:unavailable"===b.data){if(a._closed||a.close(),a._requests.connect){for(d=Error("Closing client. Could not access localStorage in hub."),c=0;c<a._requests.connect.length;c++){a._requests.connect[c](d);}}}else{if(-1!==b.data.indexOf("cross-storage:")&&!a._connected){a._connected=!0;if(!a._requests.connect){return;}for(c=0;c<a._requests.connect.length;c++){a._requests.connect[c](d);}delete a._requests.connect;}if("cross-storage:ready"!==b.data){try{e=JSON.parse(b.data);}catch(h){return;}if(e.id&&a._requests[e.id]){a._requests[e.id](e.error,e.result);}}}}};window.addEventListener?window.addEventListener("message",this._listener,!1):window.attachEvent("onmessage",this._listener);};xlsp._poll=function(){var a,b;a=this;b=setInterval(function(){if(a._connected){return clearInterval(b);}a._hub&&a._hub.postMessage("cross-storage:poll",a._origin);},1000);};xlsp._createFrame=function(a){var b,c;b=window.document.createElement("iframe");b.id=this._frameId;for(c in XLSClient.frameStyle){XLSClient.frameStyle.hasOwnProperty(c)&&(b.style[c]=XLSClient.frameStyle[c]);}window.document.body.appendChild(b);b.src=a;return b;};xlsp._request=function(a,b){var c,d;if(this._closed){return this._promise.reject(Error("XLSClient has closed"));}d=this;d._count++;if(d._hub.parent===null){d.refresh();}c={id:this._id+":"+d._count,method:"cross-storage:"+a,params:b};return new this._promise(function(a,b){var g,f;g=setTimeout(function(){d._requests[c.id]&&(delete d._requests[c.id],b(Error("Timeout: could not perform "+c.method)));},d._timeout);d._requests[c.id]=function(e,f){clearTimeout(g);delete d._requests[c.id];if(e){return b(Error(e));}a(f);};Array.prototype.toJSON&&(f=Array.prototype.toJSON,Array.prototype.toJSON=null);d._hub.postMessage(JSON.stringify(c),d._origin);f&&(Array.prototype.toJSON=f);});};xlsp.refresh=function(){this._hub=document.getElementById(this._frameId).contentWindow;};window.__as_x_storage_sendAll=function(callback){var grabVals=function(){var k,i,d=window.localStorage,vals=[];for(i=d.length-1;i>=0;i--){k=d.key(i),/__as_/.test(k)&&vals.push({key:k,value:d[k]});}return vals;};window.__as_x_storage.setAll(grabVals()).then(function(){callback();})["catch"](function(er){window.__as_x_storage.setAll(grabVals()).then(function(){callback();})["catch"](function(err){window.console.log("Can't send local localStorage to remote: "+err);callback();});});};if(typeof document.referrer!=="undefined"&&document.referrer!==""){__as_x_storage_loc_a.href=document.referrer;changed=__as_x_storage_loc_a.protocol!==window.location.protocol||__as_x_storage_loc_a.host!==window.location.host;}if(!changed){window.__as_x_storage={_closed:true,close:function(){},renew:function(callback){var st=new XLSClient(__as_x_storage_loc,{frameId:"__as_x_ls_access"});window.__as_x_storage=st;st.renew=this.renew;st.onConnect().then(callback)["catch"](function(er){st.onConnect().then(callback)["catch"](function(err){console.log("Can't renew cross localstorage: "+err);});});}};var pl=document.createElement("link");pl.rel="prefetch";pl.href=__as_x_storage_loc;var hd=document.head||document.getElementsByTagName("head")[0];hd.appendChild(pl);window.__as_may_run_listener();}else{var activateCrossStorage=function(){if(typeof window.__as_x_storage!=="undefined"){return;}window.__as_x_storage=new XLSClient(__as_x_storage_loc,{frameId:"__as_x_ls_access"});window.__as_x_storage.renew=function(callback){window.__as_x_storage=new XLSClient(__as_x_storage_loc,{frameId:"__as_x_ls_access"});window.__as_x_storage.renew=this.renew;window.__as_x_storage.onConnect().then(callback)["catch"](function(er){window.__as_x_storage.onConnect().then(callback)["catch"](function(err){console.log("Can't renew cross localstorage: "+err);});});};var locLedt=localStorage.getItem("__as_ledt");var xStorageConnected=function(){window.__as_x_storage.getVals().then(function(remoteVals){if(locLedt===null&&remoteVals.length===0){window.__as_may_run_listener();}else{var remLedt=null;if(locLedt!==null){for(var i=0;remLedt===null&&i<remoteVals.length;i++){if("__as_ledt"===remoteVals[i].key){remLedt=remoteVals[i].val;}}}if(locLedt===null||remLedt!==null&&parseInt(remLedt)>parseInt(locLedt)){for(var i=0;i<remoteVals.length;i++){if(/^__as_/.test(remoteVals[i].key)){localStorage.setItem(remoteVals[i].key,remoteVals[i].val);}}window.__as_may_run_listener();}else{window.__as_x_storage_sendAll(window.__as_may_run_listener);}}})["catch"](function(err){window.console.log("Can't synchronize localStorages: "+err);window.__as_may_run_listener();});};window.__as_x_storage.onConnect().then(xStorageConnected)["catch"](function(err){window.__as_x_storage.onConnect().then(xStorageConnected)["catch"](function(err){window.console.log("Can't load "+__as_x_storage_loc+": "+err);window.__as_may_run_listener();});});};var tryActivateCrossStorage=function(){if((typeof document.body!=="undefined")&&document.body!==null){activateCrossStorage();return true;}else{return false;}};if(!tryActivateCrossStorage()){var timer=null;var docE=document.documentElement;if(typeof window.MutationObserver==="function"){var obs=new MutationObserver(function(mutations){if(tryActivateCrossStorage()){obs.disconnect();if(timer!==null&&typeof window.clearTimeout==="function"){window.clearTimeout(timer);}}});obs.observe(docE,{childList:true});}else{if(docE.addEventListener==="function"){var obs=function(){if(tryActivateCrossStorage()){docE.removeEventListener("DOMNodeInserted",obs,false);if(timer!==null&&typeof window.clearTimeout==="function"){window.clearTimeout(timer);}}};docE.addEventListener("DOMNodeInserted",obs,false);}}var tryActivateCrossStorageTimer=function(){if(!tryActivateCrossStorage()){timer=setTimeout(tryActivateCrossStorageTimer,10);}};timer=setTimeout(tryActivateCrossStorageTimer,10);}}}}})();__as_rng=false;}